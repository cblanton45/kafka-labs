<p><link rel='stylesheet' href='../assets/css/main.css'/></p>
<p><a href="../README.html">&lt;&lt; back to main index</a></p>
<h1 id="lab-1.2-run-kafka">Lab 1.2 : Run Kafka</h1>
<h3 id="overview">Overview</h3>
<p>Install and run Kafka</p>
<h3 id="depends-on">Depends On</h3>
<p>None</p>
<h3 id="run-time">Run time</h3>
<p>10 mins</p>
<h2 id="step-1-download-and-unpack-kafka">Step 1 : Download and Unpack Kafka</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" data-line-number="1">    <span class="co">#  be sure to be in home directory</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">    $   <span class="bu">cd</span>   </a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">    $   <span class="fu">wget</span> https://elephantscale-public.s3.amazonaws.com/downloads/kafka_2.11-2.1.0.tgz</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">    $   <span class="fu">tar</span> xvf kafka_2.11-2.1.0.tgz</a>
<a class="sourceLine" id="cb1-7" data-line-number="7"></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">    $   <span class="fu">mv</span> kafka_2.11-2.1.0  kafka</a>
<a class="sourceLine" id="cb1-9" data-line-number="9"></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">    <span class="co">## older version</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">    <span class="co"># $  tar xvf ~/files/kafka_2.11-1.1.1.tgz</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12">    <span class="co"># $  mv kafka_2.11-1.1.1    kafka</span></a></code></pre></div>
<h2 id="step-2-start-kafka">Step 2 : Start Kafka</h2>
<p>Enable deleting the topics</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" data-line-number="1">  $   <span class="bu">echo</span> -e <span class="st">&quot;\n\ndelete.topic.enable=true \n&quot;</span> <span class="op">&gt;&gt;</span> ~/kafka/config/server.properties</a></code></pre></div>
<p>Start Kafka</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" data-line-number="1">    $   <span class="va">JMX_PORT=</span>9999  <span class="ex">~/kafka/bin/kafka-server-start.sh</span> -daemon   ~/kafka/config/server.properties</a></code></pre></div>
<p>We are setting the optional JMX port so we can get metrics easily.</p>
<p>Try JPS command to see if Kafka is running</p>
<pre><code>    $  jps</code></pre>
<p>Output may look like this. We have Zookeeper and Kafka running</p>
<pre class="console"><code>4737 QuorumPeerMain
5361 Kafka
5075 main
5092 main
5418 Jps</code></pre>
<h2 id="step-3-kafka-manager-ui">Step 3 : Kafka Manager UI</h2>
<p>We are using the excellent <a href="https://github.com/yahoo/kafka-manager">Kafka Manager UI (by Yahoo)</a>. We have already packaged the application that is ready to use.</p>
<pre><code>    $    cd  ~/apps/kafka-manager

    $    nohup bin/kafka-manager  &amp;

    $    cd</code></pre>
<p>Go to url : http://your_IP:9000 in your browser.</p>
<p>You may see a UI like this.</p>
<p><img src="../assets/images/1.2a.png" style="border: 5px solid grey ; max-width:100%;"  /></p>
<p>Access the ‘local’ cluster already defined. If one is not defined, you can define one as follows.</p>
<p><img src="../assets/images/1.2b.png" style="border: 5px solid grey ; max-width:100%;"  /></p>
<p>Explore the UI</p>
<p><img src="../assets/images/1.2c.png" style="border: 5px solid grey ; max-width:100%;"  /></p>
<h2 id="step-4-kafka-zookeeper">Step 4 : Kafka &amp; Zookeeper</h2>
<p>Inspect ZK config</p>
<h3 id="option-1-zk-web">Option 1 : ZK-web</h3>
<p>Go to ZK web dashboard (http://ip_address:8081) and refresh.</p>
<p><img src="../assets/images/1.2d.png" style="border: 5px solid grey ; max-width:100%;"  /></p>
<h3 id="option-2-zk-cli">Option 2 : ZK CLI</h3>
<pre><code>    $   ~/zookeeper/bin/zkCli.sh  -server  localhost:2181

    &gt;   ls   /
    &gt;   ls   /brokers
    &gt;   ls   /brokers/ids
    &gt;   ls   /brokers/ids/0</code></pre>
