<p><link rel='stylesheet' href='../assets/css/main.css'/></p>
<p><a href="../README.html">&lt;&lt; back to main index</a></p>
<h1 id="lab-1.1-run-zookeeper">Lab 1.1 : Run Zookeeper</h1>
<h3 id="overview">Overview</h3>
<p>Install and run Zookeeper</p>
<h3 id="depends-on">Depends On</h3>
<p>None</p>
<h3 id="run-time">Run time</h3>
<p>10 mins</p>
<h2 id="step-1-install-zookeeper">Step 1 : Install Zookeeper</h2>
<p>Try this in terminal</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" data-line-number="1">    $   <span class="bu">cd</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">    $   <span class="fu">tar</span> xvf ~/files/zookeeper-3.4.12.tar.gz</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">    <span class="co"># rename for easy referral</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">    $   <span class="fu">mv</span> zookeeper-3.4.12     zookeeper</a>
<a class="sourceLine" id="cb1-7" data-line-number="7"></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">    <span class="co">## Getting another version</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">    <span class="co"># $   wget -O  ~/files/zookeeper-3.4.12.tar.gz    http://apache.cs.utah.edu/zookeeper/zookeeper-3.4.12/zookeeper-3.4.12.tar.gz</span></a></code></pre></div>
<h2 id="step-2-configure-zookeeper">Step 2 : Configure Zookeeper</h2>
<p>We have a sample config file for zookeeper. It is in <code>config/zk/zoo.cfg</code>. The content looks like this</p>
<pre><code>tickTime=2000
dataDir=/home/ubuntu/zookeeper-data
clientPort=2181</code></pre>
<p>Copy this file into ‘~/zookeeper/conf’ directory as follows.</p>
<pre><code>    $   cp ~/config/zk/zoo.cfg    ~/zookeeper/conf/zoo.cfg</code></pre>
<h2 id="step-3-create-a-zookeeper-data-directory">Step 3: Create a zookeeper data directory</h2>
<pre><code>    $    mkdir ~/zookeeper-data</code></pre>
<h2 id="step-4-start-the-zookeeper-server">Step 4: Start the zookeeper server</h2>
<pre><code>    $  ~/zookeeper/bin/zkServer.sh start</code></pre>
<h2 id="step-5-verify-zookeeper-is-running">Step 5: Verify Zookeeper is running</h2>
<p>Using JPS command</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" data-line-number="1">    $  <span class="ex">jps</span></a></code></pre></div>
<p>If we see a process named ‘QuorumPeerMain’ then zookeeper is running</p>
<pre class="console"><code>67875 QuorumPeerMain
67732
67878 Jps</code></pre>
<h3 id="option-1-simple-telnet">Option 1 : Simple telnet</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" data-line-number="1">    $   <span class="ex">telnet</span> localhost 2181</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">    <span class="ex">....</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3">    <span class="co"># enter srvr</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">    <span class="ex">srvr</span></a></code></pre></div>
<p>Output may look like this:</p>
<pre class="console"><code>Trying 127.0.0.1...
Connected to localhost.
Escape character is &#39;^]&#39;.
srvr
Zookeeper version: 3.4.8--1, built on 02/06/2016 03:18 GMT
Latency min/avg/max: 0/0/0
Received: 1
Sent: 0
Connections: 1
Outstanding: 0
Zxid: 0x0
Mode: standalone
Node count: 4
Connection closed by foreign host.</code></pre>
<h3 id="option-2-zookeeper-client">Option 2 : Zookeeper client</h3>
<pre><code>    $   ~/zookeeper/bin/zkCli.sh  -server  localhost:2181</code></pre>
<p>This will drop you into ZKCLI. Try these commands in shell.</p>
<pre><code>    &gt;   help
    &gt;   stat /
    &gt;   quit</code></pre>
<h3 id="option-3-web-ui">Option 3 : Web UI</h3>
<p>We can also use <a href="https://github.com/qiuxiafei/zk-web">zk-web</a> to examine zookeeper.</p>
<pre><code>    $    cd  ~/apps/zk-web

    $    nohup lein run  &amp;

    $    cd</code></pre>
<p>zk-web can be accessed via port 8081.<br />
Go to http://your_ip_address:8081 in a browser. Substitute your own machine IP.</p>
<p><img src="../assets/images/1.1a.png" style="border: 5px solid grey ; max-width:100%;"  /></p>
<p>You would see an output like this:</p>
<p><img src="../assets/images/1.1b.png" style="border: 5px solid grey ; max-width:100%;"  /></p>
<p><strong>Good, Zookeeper is now up and running</strong></p>
